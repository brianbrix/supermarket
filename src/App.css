/* Toast container */
.toast-region { position:fixed; top:1rem; right:1rem; display:grid; gap:.5rem; z-index:1000; max-width:260px; }
.toast { padding:.6rem .8rem; border-radius:6px; box-shadow:0 2px 6px rgba(0,0,0,.15); font-size:.85rem; }
/* Ensure readable body text in light theme */
.toast .toast-body { color:#212529; }
[data-theme='dark'] .toast .toast-body { color:#f8f9fa; }
.toast.info { background:#0a5c2b; }
.toast.error { background:#b02b2b; }

/* Progress steps */
.steps { list-style:none; padding:0; margin:0 0 1rem; display:flex; gap:1rem; flex-wrap:wrap; }
.steps li { display:flex; align-items:center; gap:.4rem; font-size:.8rem; text-transform:uppercase; letter-spacing:.5px; }
.steps .circle { width:24px; height:24px; border-radius:50%; display:inline-flex; align-items:center; justify-content:center; font-weight:600; }
.steps .done .circle { background:#0a5c2b; color:#fff; }
.steps .current .circle { background:#137d3b; color:#fff; box-shadow:0 0 0 3px rgba(19,125,59,.25); }
.steps .upcoming .circle { background:#d9e3dd; color:#333; }

/* Checkout layout */
.checkout-grid { display:grid; gap:1.5rem; align-items:start; }
.checkout-form { display:grid; gap:.8rem; max-width:420px; }
.field-error { color:#b02b2b; font-size:.75rem; }
.summary-list { list-style:none; padding:0; margin:0; }
.summary-item { display:flex; justify-content:space-between; font-size:.9rem; padding:.25rem 0; }
.summary-total { font-weight:600; border-top:1px solid #e3e3e3; margin-top:.5rem; padding-top:.5rem; }
.btn-row { display:flex; gap:.5rem; flex-wrap:wrap; }

/* Dark mode variables */
:root {
  --bg:#f7f9f8;
  --text:#1f2a24;
  --surface:#ffffff;
  --surface-elevated:#f3f6f4;
  --border:#dde4df;
  --accent:#0a5c2b;
  --accent-alt:#137d3b;
  --muted:#5c6d62;
}
/* Dark theme adjusted to neutral charcoal palette */
[data-theme='dark'] {
  --bg:#131819;
  --text:#e7ece9;
  --surface:#1c2123;
  --surface-elevated:#22282b;
  --border:#30383b;
  --accent:#1b8b48;
  --accent-alt:#24a258;
  --muted:#9fa8a2;
}
body, #root, .layout { background:var(--bg); color:var(--text); }
.nav { background:var(--surface); border-bottom:1px solid var(--border); }
footer.footer { background:var(--surface); border-top:1px solid var(--border); }
.product-card { background:var(--surface); border:none; box-shadow:0 16px 38px -30px rgba(9,27,18,0.45); position:relative; overflow:hidden; }
.product-card.card { border:none !important; }
table.cart-table { background:var(--surface); border:1px solid var(--border); }
.product-card button, button { background:var(--accent); }
button:hover { background:var(--accent-alt); }
.product-card .price { color:var(--text); }
#root { width:100%; margin:0; padding:0; text-align:initial; }

.card,
.card-header,
.card-body,
.list-group-item,
.dropdown-menu,
.modal-content,
.dropdown-item,
.table,
.offcanvas,
.bg-body,
.bg-body-tertiary,
.bg-white {
  background-color: var(--surface) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}

[data-theme='dark'] .card,
[data-theme='dark'] .card-header,
[data-theme='dark'] .card-body,
[data-theme='dark'] .list-group-item,
[data-theme='dark'] .dropdown-menu,
[data-theme='dark'] .modal-content,
[data-theme='dark'] .dropdown-item,
[data-theme='dark'] .table,
[data-theme='dark'] .offcanvas,
[data-theme='dark'] .bg-body,
[data-theme='dark'] .bg-body-tertiary,
[data-theme='dark'] .bg-white {
  background-color: var(--surface) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}

[data-theme='dark'] .card,
[data-theme='dark'] .list-group-item,
[data-theme='dark'] .dropdown-menu,
[data-theme='dark'] .modal-content {
  box-shadow: 0 12px 32px -18px rgba(0,0,0,0.7);
}

[data-theme='dark'] .table thead th {
  background-color: var(--surface-elevated) !important;
  color: var(--text) !important;
}

[data-theme='dark'] .text-muted {
  color: var(--muted) !important;
}

[data-theme='dark'] .breadcrumb-item + .breadcrumb-item::before {
  color: var(--muted);
}

[data-theme='dark'] .form-control,
[data-theme='dark'] .form-select,
[data-theme='dark'] .form-control:focus,
[data-theme='dark'] .form-select:focus {
  background-color: var(--surface-elevated);
  color: var(--text);
  border-color: var(--border);
  box-shadow: none;
}

[data-theme='dark'] .form-control:focus,
[data-theme='dark'] .form-select:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(36,162,88,0.25);
}

[data-theme='dark'] .btn-outline-secondary,
[data-theme='dark'] .btn-outline-primary {
  color: var(--text);
  border-color: var(--border);
}

[data-theme='dark'] .btn-outline-secondary:hover {
  background-color: var(--surface-elevated);
  color: var(--text);
}

[data-theme='dark'] .btn-outline-primary {
  border-color: var(--accent);
  color: var(--accent-alt);
}

[data-theme='dark'] .btn-outline-primary:hover {
  background-color: var(--accent);
  color: #fff;
}

* { box-sizing: border-box; }
body, #root, .layout { min-height: 100vh; margin: 0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif; background:var(--bg); color:var(--text); }
a { color:#0565c9; text-decoration:none; }
a:hover { text-decoration:underline; }
.layout { display:flex; flex-direction:column; }
main { flex:1; width:100%; padding:1.5rem clamp(.75rem, 3vw, 1.5rem); }

.nav { display:flex; gap:2rem; align-items:center; padding:.75rem 1rem; background:var(--surface); border-bottom:1px solid var(--border); position:sticky; top:0; z-index:10; }
.nav .brand { font-weight:700; font-size:1.15rem; color:#0a5c2b; }
.nav ul { list-style:none; display:flex; gap:1rem; padding:0; margin:0; }
.nav a { padding:.35rem .6rem; border-radius:6px; }
.nav a:hover { background:#f1f7f2; }

footer.footer { padding:1rem; text-align:center; font-size:.85rem; background:var(--surface); border-top:1px solid var(--border); }

h1 { margin-top:0; font-size:clamp(1.8rem, 4vw, 2.3rem); }
p.muted { color:#555; font-size:.85rem; }

.grid { display:grid; gap:1rem; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); }

button { background:var(--accent); color:#fff; padding:.55rem .9rem; border:none; border-radius:6px; cursor:pointer; font-weight:500; }
button.secondary { background:#b02b2b; }
button:hover { background:var(--accent-alt); }
button.secondary:hover { background:#c23c3c; }
button:active { scale:.98; }

.rating-stars__star {
  color: #f7ad1a !important;
  text-decoration: none !important;
}
.rating-stars__star--interactive {
  background: transparent !important;
}
.rating-stars__star--interactive:hover,
.rating-stars__star--interactive:focus-visible {
  color: #e69500 !important;
  outline: none;
}
.rating-stars__star[disabled] {
  pointer-events: none;
}
.rating-stars--interactive .rating-stars__star {
  cursor: pointer;
}
[data-theme='dark'] .rating-stars__star {
  color: #ffc861 !important;
}

.product-card { transition:transform .2s ease, box-shadow .2s ease; display:flex; flex-direction:column; border-radius:14px; }
.product-card:hover { transform:translateY(-4px); box-shadow:0 24px 48px -26px rgba(14,48,30,.45); }
[data-theme='dark'] .product-card { box-shadow:0 22px 48px -32px rgba(0,0,0,.8); }
[data-theme='dark'] .product-card:hover { box-shadow:0 26px 60px -34px rgba(0,0,0,.85); }
.product-card .card-body { display:flex; flex-direction:column; flex:1 1 auto; }
.product-card .card-body .text-center { display:flex; align-items:center; justify-content:center; min-height:120px; }
.product-card__title { display:-webkit-box; -webkit-line-clamp:2; line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
.product-card__description { display:-webkit-box; -webkit-line-clamp:2; line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; min-height:2.6rem; }
.product-card__title--compact { white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.product-card--compact .card-body { padding:.75rem .75rem .4rem; }
.product-card--compact .card-body .text-center { min-height:80px; }
.product-card--compact .product-card__description { display:none; }
.product-card--compact .btn { padding:.5rem; font-size:.75rem; border-radius:999px; }
.product-card--compact .fw-semibold { font-size:.95rem; }

.product-card-skeleton { border-radius:14px; overflow:hidden; }

.product-carousel-track { display:flex; gap:1rem; overflow-x:auto; padding-bottom:.75rem; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch; }
.product-carousel-track::-webkit-scrollbar { height:6px; }
.product-carousel-track::-webkit-scrollbar-thumb { background:rgba(0,0,0,.18); border-radius:999px; }
.product-carousel-card { flex:0 0 clamp(210px, 22vw + 110px, 280px); scroll-snap-align:start; }
.product-carousel-card .product-card, .product-card-skeleton { border-radius:16px; }
.product-card-skeleton { background:linear-gradient(135deg, rgba(255,255,255,.9), rgba(244,248,246,.95)); box-shadow:0 12px 32px -28px rgba(17,31,21,.35); }
[data-theme='dark'] .product-card-skeleton { background:linear-gradient(135deg, rgba(32,36,34,.9), rgba(21,24,22,.95)); box-shadow:0 14px 40px -32px rgba(0,0,0,.7); }

@media (max-width: 575.98px) {
  .product-carousel-track { gap:.65rem; padding-bottom:.65rem; }
  .product-carousel-card { flex:0 0 calc(25% - .75rem); min-width:0; }
  .product-carousel-card .product-card { min-width:0; }
  .product-carousel-card .product-card .card-body { padding:.7rem .45rem .4rem; }
  .product-carousel-card .product-card .card-body .text-center { min-height:72px; }
  .product-carousel-card .product-card h3 { font-size:.85rem; }
  .product-carousel-card .product-card .product-card__description { display:none; }
  .product-carousel-card .product-card .btn { padding:.45rem .5rem; font-size:.72rem; border-radius:999px; }
}

.promo-strip { position:relative; overflow:hidden; display:flex; align-items:center; gap:1.25rem; padding:.85rem 1.75rem; border-radius:999px; background:var(--promo-strip-gradient); color:var(--promo-strip-text); box-shadow:0 28px 70px -36px rgba(15,35,28,.55); }
.promo-strip__shimmer { position:absolute; inset:-60% -70%; background:radial-gradient(circle at 20% 20%, var(--promo-strip-sheen), transparent 55%); opacity:.5; animation:promoStripShine 9s linear infinite; mix-blend-mode:screen; pointer-events:none; }
.promo-strip__content { position:relative; display:flex; align-items:center; justify-content:space-between; gap:1.5rem; width:100%; flex-wrap:wrap; }
.promo-strip__copy { display:flex; flex-direction:column; gap:.2rem; min-width:0; }
.promo-strip__eyebrow { font-size:.7rem; text-transform:uppercase; letter-spacing:.22em; font-weight:600; opacity:.9; }
.promo-strip__headline { font-size:clamp(1rem, 1.4vw + .8rem, 1.3rem); font-weight:700; letter-spacing:.01em; }
.promo-strip__subtext { font-size:.8rem; opacity:.92; max-width:48ch; }
.promo-strip__cta { display:inline-flex; align-items:center; gap:.35rem; padding:.55rem 1rem; border-radius:999px; background:rgba(255,255,255,.16); color:var(--promo-strip-text); text-decoration:none; font-weight:600; transition:transform .2s ease, background .2s ease; backdrop-filter:blur(2px); box-shadow:0 12px 30px -20px rgba(0,0,0,.45); }
.promo-strip__cta:hover { transform:translateY(-1px); background:rgba(255,255,255,.26); text-decoration:none; }
.promo-strip__cta i { font-size:1.2rem; }

@keyframes promoStripShine {
  0% { transform:translate3d(-20%, -10%, 0) rotate(12deg); opacity:.55; }
  50% { transform:translate3d(40%, 10%, 0) rotate(12deg); opacity:.75; }
  100% { transform:translate3d(120%, -15%, 0) rotate(12deg); opacity:.45; }
}

@media (max-width: 767.98px) {
  .promo-strip { border-radius:24px; padding:1rem 1.25rem; }
  .promo-strip__content { flex-direction:column; align-items:flex-start; gap:.75rem; }
  .promo-strip__headline { font-size:1.05rem; }
  .promo-strip__cta { align-self:stretch; justify-content:center; }
}

@media (prefers-reduced-motion: reduce) {
  .promo-strip__shimmer { animation:none; opacity:.35; }
  .promo-strip__cta { transition:none; }
}

.tag-select__control { border-radius:10px; border-color:var(--border); min-height:44px; box-shadow:none; background:var(--surface); }
.tag-select__control:hover { border-color:var(--accent); }
.tag-select__control--is-focused { border-color:var(--accent); box-shadow:0 0 0 2px rgba(19,125,59,.18); }
.tag-select__value-container { gap:.35rem; padding:.25rem .6rem; }
.tag-select__multi-value { background:rgba(10,92,43,.12); border-radius:999px; }
.tag-select__multi-value__label { color:var(--accent); font-weight:600; font-size:.8rem; padding:.25rem .35rem .25rem .55rem; }
.tag-select__multi-value__remove { color:var(--accent); padding-right:.45rem; }
.tag-select__indicator-separator { display:none; }
.tag-select__menu { z-index:1056; border-radius:12px; overflow:hidden; box-shadow:0 16px 38px -24px rgba(0,0,0,.16); }
.tag-select__option--is-focused { background:rgba(19,125,59,.08); color:var(--accent); }
.tag-select__option--is-selected { background:rgba(19,125,59,.16); color:var(--accent); }
.tag-select__placeholder { color:var(--muted); font-size:.85rem; }
[data-theme='dark'] .tag-select__control { background:var(--surface-elevated); border-color:var(--border); }
[data-theme='dark'] .tag-select__control--is-focused { box-shadow:0 0 0 2px rgba(36,162,88,.28); }
[data-theme='dark'] .tag-select__multi-value { background:rgba(36,162,88,.18); }
[data-theme='dark'] .tag-select__multi-value__label { color:#7fffc1; }
[data-theme='dark'] .tag-select__menu { background:var(--surface-elevated); }
[data-theme='dark'] .tag-select__option--is-focused { background:rgba(36,162,88,.22); color:#7fffc1; }
[data-theme='dark'] .tag-select__option--is-selected { background:rgba(36,162,88,.32); color:#7fffc1; }

table.cart-table { width:100%; border-collapse:collapse; background:var(--surface); border:1px solid var(--border); }
table.cart-table th, table.cart-table td { padding:.5rem .6rem; text-align:left; border-bottom:1px solid #ececec; font-size:.9rem; }
table.cart-table input { width:60px; }
.total { font-size:1.1rem; font-weight:600; }

.cart-item-card { border:1px solid var(--border); border-radius:12px; padding:1rem; background:var(--surface); }
.cart-item-card__header { display:flex; justify-content:space-between; gap:.75rem; align-items:flex-start; margin-bottom:.5rem; }
.cart-item-card__name { font-weight:600; font-size:1rem; }
.cart-item-card__meta { display:flex; flex-wrap:wrap; gap:.5rem; font-size:.85rem; color:var(--muted); }
.cart-item-card__footer { display:flex; flex-direction:column; gap:.65rem; margin-top:.75rem; }
.cart-item-card__actions { display:flex; flex-wrap:wrap; gap:.5rem; }
.cart-item-card__price { font-weight:600; }

@media (max-width: 575.98px) {
  .product-card .card-body .text-center { min-height:96px; }
  .product-card__description { min-height:auto; }
  .product-card { width:100%; }
}

@media (max-width:600px) {
  .nav ul { gap:.4rem; }
  main { padding:1.1rem .75rem; }
}

/* Mobile toast centering */
@media (max-width: 575.98px) {
  .toast-container-responsive { left:50%; right:auto !important; transform:translateX(-50%); width: min(92vw, 380px); }
  .toast-container-responsive .toast { width:100%; }
}

/* Full-width action buttons helper (already applied via flex-grow classes, safety fallback) */
@media (max-width: 575.98px) {
  .btn { min-height:44px; }
}

/* Mobile cart bar */
.mobile-cart-bar { backdrop-filter: blur(6px); }
[data-theme='dark'] .mobile-cart-bar { background:rgba(30,33,30,0.92)!important; }

/* Print styles: focus on receipt card */
@media print {
  body * { visibility:hidden; }
  .card, .card * { visibility:visible; }
  .card { position:absolute; left:0; top:0; width:280px; box-shadow:none !important; border:0 !important; }
  nav, footer, .navbar, .mobile-cart-bar { display:none !important; }
}

/* Payment Option Modal Enhancements */
.payment-option-modal::backdrop { background: rgba(0,0,0,0.45); backdrop-filter: blur(2px); }
.payment-option-modal { border: none; padding: 0; border-radius: 16px; box-shadow: 0 8px 32px -4px rgba(0,0,0,0.35); max-width: 520px; width: 100%; }
.payment-option-modal .pom-header h2 { font-weight: 600; letter-spacing: .3px; }
.payment-option-modal .pom-logo-wrapper { flex-shrink:0; }
.payment-option-modal .pom-logo-wrapper .pom-logo { display:block; }
.payment-option-modal form input.form-control { font-size: .9rem; }
.payment-option-modal .form-text { font-size: .65rem; }

/* Silver themed surface for payment modal */
.payment-option-modal .pom-surface { background: linear-gradient(135deg,#f0f1f3,#e2e4e7 55%,#d7dadd); border-radius:16px; overflow:hidden; }
/* Also apply silver theme for admin payment option config dialog */
.payment-option-modal.admin-config .pom-surface { background: linear-gradient(135deg,#f0f1f3,#e2e4e7 55%,#d7dadd); }
.payment-option-modal .pom-header { background: rgba(255,255,255,0.6); backdrop-filter: blur(4px); }
.payment-option-modal .pom-body { background: linear-gradient(180deg,rgba(255,255,255,0.55),rgba(255,255,255,0.35)); }
.payment-option-modal .reconcile-block { background: rgba(255,255,255,0.75)!important; }
[data-theme='dark'] .payment-option-modal .pom-surface { background: linear-gradient(135deg,#2b2e30,#26292b 60%,#212426); }
[data-theme='dark'] .payment-option-modal.admin-config .pom-surface { background: linear-gradient(135deg,#2b2e30,#26292b 60%,#212426); }
[data-theme='dark'] .payment-option-modal .pom-header { background: rgba(40,43,45,0.75); }
[data-theme='dark'] .payment-option-modal .pom-body { background: linear-gradient(180deg,rgba(50,53,55,0.55),rgba(45,48,50,0.35)); }
[data-theme='dark'] .payment-option-modal .reconcile-block { background: rgba(70,74,78,0.75)!important; }
/* Improve modal instructions heading contrast */
.payment-option-modal .instructions-heading { color:#2d3235; background:linear-gradient(90deg,rgba(255,255,255,0.9),rgba(255,255,255,0)); padding:.25rem .5rem; border-left:4px solid #137d3b; border-radius:4px; }
[data-theme='dark'] .payment-option-modal .instructions-heading { color:#eef1f2; background:linear-gradient(90deg,rgba(60,63,66,0.85),rgba(60,63,66,0)); border-left-color:#24a258; }
/* Force higher contrast for small text in modal */
.payment-option-modal .small, .payment-option-modal small { color:#2f3437; }
[data-theme='dark'] .payment-option-modal .small, [data-theme='dark'] .payment-option-modal small { color:#d8dcdf; }
/* Inputs contrast adjustments */
[data-theme='dark'] .payment-option-modal input.form-control, [data-theme='dark'] .payment-option-modal input.form-control-sm { background:#383c3f; color:#f2f4f5; border-color:#4a5053; }
[data-theme='dark'] .payment-option-modal input.form-control:focus { border-color:#24a258; box-shadow:0 0 0 2px rgba(36,162,88,.3); }
/* Buttons outline variant visibility */
[data-theme='dark'] .payment-option-modal .btn.btn-outline-secondary { color:#e3e6e8; border-color:#5a6063; }
[data-theme='dark'] .payment-option-modal .btn.btn-outline-secondary:hover { background:#44484b; }
[data-theme='dark'] .payment-option-modal .btn.btn-outline-primary { color:#e6f8ed; border-color:#24a258; }
[data-theme='dark'] .payment-option-modal .btn.btn-outline-primary:hover { background:#24a258; color:#fff; }
/* Animations for fallback sections */
.payment-option-modal .fade-in { animation: fadeIn .4s ease both; }
.payment-option-modal .slide-up { animation: slideUp .45s ease both; }
@keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
@keyframes slideUp { from { opacity:0; transform: translateY(8px); } to { opacity:1; transform: translateY(0); } }
/* Divider label */
.payment-option-modal .manual-divider { letter-spacing:.5px; color:#3a3f42; }
[data-theme='dark'] .payment-option-modal .manual-divider { color:#c9ced1; }

/* Payment Option buttons on Checkout */
button.btn.btn-light.border.position-relative { transition: border-color .2s, box-shadow .2s; }
button.btn.btn-light.border.position-relative:hover { border-color: #999; box-shadow: 0 2px 6px rgba(0,0,0,0.08); }
button.btn.btn-light.border.position-relative:focus-visible { outline: 2px solid #198754; outline-offset:2px; }

@media (max-width:600px) {
  .payment-option-modal { max-width: 94vw; }
}

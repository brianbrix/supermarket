/* Toast container */
.toast-region { position:fixed; top:1rem; right:1rem; display:grid; gap:.5rem; z-index:1000; max-width:260px; }
.toast { padding:.6rem .8rem; border-radius:6px; box-shadow:0 2px 6px rgba(0,0,0,.15); font-size:.85rem; }
/* Ensure readable body text in light theme */
.toast .toast-body { color:#212529; }
[data-theme='dark'] .toast .toast-body { color:#f8f9fa; }
.toast.info { background:#0a5c2b; }
.toast.error { background:#b02b2b; }

/* Progress steps */
.steps { list-style:none; padding:0; margin:0 0 1rem; display:flex; gap:1rem; flex-wrap:wrap; }
.steps li { display:flex; align-items:center; gap:.4rem; font-size:.8rem; text-transform:uppercase; letter-spacing:.5px; }
.steps .circle { width:24px; height:24px; border-radius:50%; display:inline-flex; align-items:center; justify-content:center; font-weight:600; }
.steps .done .circle { background:#0a5c2b; color:#fff; }
.steps .current .circle { background:#137d3b; color:#fff; box-shadow:0 0 0 3px rgba(19,125,59,.25); }
.steps .upcoming .circle { background:#d9e3dd; color:#333; }

/* Checkout layout */
.checkout-grid { display:grid; gap:1.5rem; align-items:start; }
.checkout-form { display:grid; gap:.8rem; max-width:420px; }
.field-error { color:#b02b2b; font-size:.75rem; }
.summary-list { list-style:none; padding:0; margin:0; }
.summary-item { display:flex; justify-content:space-between; font-size:.9rem; padding:.25rem 0; }
.summary-total { font-weight:600; border-top:1px solid #e3e3e3; margin-top:.5rem; padding-top:.5rem; }
.btn-row { display:flex; gap:.5rem; flex-wrap:wrap; }

/* Dark mode variables */
:root { --bg:#fafafa; --text:#222; --surface:#fff; --border:#e3e3e3; --accent:#0a5c2b; --accent-alt:#137d3b; }
/* Dark theme adjusted to neutral dark greys instead of near-black */
[data-theme='dark'] { --bg:#1f2224; --text:#f2f4f5; --surface:#2a2d30; --border:#3a3f42; --accent:#1b8b48; --accent-alt:#24a258; }
body, #root, .layout { background:var(--bg); color:var(--text); }
.nav { background:var(--surface); border-bottom:1px solid var(--border); }
footer.footer { background:var(--surface); border-top:1px solid var(--border); }
.product-card { background:var(--surface); border:1px solid var(--border); }
table.cart-table { background:var(--surface); border:1px solid var(--border); }
.product-card button, button { background:var(--accent); }
button:hover { background:var(--accent-alt); }
.product-card .price { color:var(--text); }
#root { width:100%; margin:0; padding:0; text-align:initial; }

* { box-sizing: border-box; }
body, #root, .layout { min-height: 100vh; margin: 0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif; background:var(--bg); color:var(--text); }
a { color:#0565c9; text-decoration:none; }
a:hover { text-decoration:underline; }
.layout { display:flex; flex-direction:column; }
main { flex:1; width:100%; padding:1.5rem 1rem; }

.nav { display:flex; gap:2rem; align-items:center; padding:.75rem 1rem; background:var(--surface); border-bottom:1px solid var(--border); position:sticky; top:0; z-index:10; }
.nav .brand { font-weight:700; font-size:1.15rem; color:#0a5c2b; }
.nav ul { list-style:none; display:flex; gap:1rem; padding:0; margin:0; }
.nav a { padding:.35rem .6rem; border-radius:6px; }
.nav a:hover { background:#f1f7f2; }

footer.footer { padding:1rem; text-align:center; font-size:.85rem; background:var(--surface); border-top:1px solid var(--border); }

h1 { margin-top:0; font-size:clamp(1.8rem, 4vw, 2.3rem); }
p.muted { color:#555; font-size:.85rem; }

.grid { display:grid; gap:1rem; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); }

button { background:var(--accent); color:#fff; padding:.55rem .9rem; border:none; border-radius:6px; cursor:pointer; font-weight:500; }
button.secondary { background:#b02b2b; }
button:hover { background:var(--accent-alt); }
button.secondary:hover { background:#c23c3c; }
button:active { scale:.98; }

table.cart-table { width:100%; border-collapse:collapse; background:var(--surface); border:1px solid var(--border); }
table.cart-table th, table.cart-table td { padding:.5rem .6rem; text-align:left; border-bottom:1px solid #ececec; font-size:.9rem; }
table.cart-table input { width:60px; }
.total { font-size:1.1rem; font-weight:600; }

@media (max-width:600px) {
  .nav ul { gap:.4rem; }
  main { padding:1rem; }
}

/* Mobile toast centering */
@media (max-width: 575.98px) {
  .toast-container-responsive { left:50%; right:auto !important; transform:translateX(-50%); width: min(92vw, 380px); }
  .toast-container-responsive .toast { width:100%; }
}

/* Full-width action buttons helper (already applied via flex-grow classes, safety fallback) */
@media (max-width: 575.98px) {
  .btn { min-height:44px; }
}

/* Mobile cart bar */
.mobile-cart-bar { backdrop-filter: blur(6px); }
[data-theme='dark'] .mobile-cart-bar { background:rgba(30,33,30,0.92)!important; }

/* Print styles: focus on receipt card */
@media print {
  body * { visibility:hidden; }
  .card, .card * { visibility:visible; }
  .card { position:absolute; left:0; top:0; width:280px; box-shadow:none !important; border:0 !important; }
  nav, footer, .navbar, .mobile-cart-bar { display:none !important; }
}

/* Payment Option Modal Enhancements */
.payment-option-modal::backdrop { background: rgba(0,0,0,0.45); backdrop-filter: blur(2px); }
.payment-option-modal { border: none; padding: 0; border-radius: 16px; box-shadow: 0 8px 32px -4px rgba(0,0,0,0.35); max-width: 520px; width: 100%; }
.payment-option-modal .pom-header h2 { font-weight: 600; letter-spacing: .3px; }
.payment-option-modal .pom-logo-wrapper { flex-shrink:0; }
.payment-option-modal .pom-logo-wrapper .pom-logo { display:block; }
.payment-option-modal form input.form-control { font-size: .9rem; }
.payment-option-modal .form-text { font-size: .65rem; }

/* Silver themed surface for payment modal */
.payment-option-modal .pom-surface { background: linear-gradient(135deg,#f0f1f3,#e2e4e7 55%,#d7dadd); border-radius:16px; overflow:hidden; }
/* Also apply silver theme for admin payment option config dialog */
.payment-option-modal.admin-config .pom-surface { background: linear-gradient(135deg,#f0f1f3,#e2e4e7 55%,#d7dadd); }
.payment-option-modal .pom-header { background: rgba(255,255,255,0.6); backdrop-filter: blur(4px); }
.payment-option-modal .pom-body { background: linear-gradient(180deg,rgba(255,255,255,0.55),rgba(255,255,255,0.35)); }
.payment-option-modal .reconcile-block { background: rgba(255,255,255,0.75)!important; }
[data-theme='dark'] .payment-option-modal .pom-surface { background: linear-gradient(135deg,#2b2e30,#26292b 60%,#212426); }
[data-theme='dark'] .payment-option-modal.admin-config .pom-surface { background: linear-gradient(135deg,#2b2e30,#26292b 60%,#212426); }
[data-theme='dark'] .payment-option-modal .pom-header { background: rgba(40,43,45,0.75); }
[data-theme='dark'] .payment-option-modal .pom-body { background: linear-gradient(180deg,rgba(50,53,55,0.55),rgba(45,48,50,0.35)); }
[data-theme='dark'] .payment-option-modal .reconcile-block { background: rgba(70,74,78,0.75)!important; }
/* Improve modal instructions heading contrast */
.payment-option-modal .instructions-heading { color:#2d3235; background:linear-gradient(90deg,rgba(255,255,255,0.9),rgba(255,255,255,0)); padding:.25rem .5rem; border-left:4px solid #137d3b; border-radius:4px; }
[data-theme='dark'] .payment-option-modal .instructions-heading { color:#eef1f2; background:linear-gradient(90deg,rgba(60,63,66,0.85),rgba(60,63,66,0)); border-left-color:#24a258; }
/* Force higher contrast for small text in modal */
.payment-option-modal .small, .payment-option-modal small { color:#2f3437; }
[data-theme='dark'] .payment-option-modal .small, [data-theme='dark'] .payment-option-modal small { color:#d8dcdf; }
/* Inputs contrast adjustments */
[data-theme='dark'] .payment-option-modal input.form-control, [data-theme='dark'] .payment-option-modal input.form-control-sm { background:#383c3f; color:#f2f4f5; border-color:#4a5053; }
[data-theme='dark'] .payment-option-modal input.form-control:focus { border-color:#24a258; box-shadow:0 0 0 2px rgba(36,162,88,.3); }
/* Buttons outline variant visibility */
[data-theme='dark'] .payment-option-modal .btn.btn-outline-secondary { color:#e3e6e8; border-color:#5a6063; }
[data-theme='dark'] .payment-option-modal .btn.btn-outline-secondary:hover { background:#44484b; }
[data-theme='dark'] .payment-option-modal .btn.btn-outline-primary { color:#e6f8ed; border-color:#24a258; }
[data-theme='dark'] .payment-option-modal .btn.btn-outline-primary:hover { background:#24a258; color:#fff; }
/* Animations for fallback sections */
.payment-option-modal .fade-in { animation: fadeIn .4s ease both; }
.payment-option-modal .slide-up { animation: slideUp .45s ease both; }
@keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
@keyframes slideUp { from { opacity:0; transform: translateY(8px); } to { opacity:1; transform: translateY(0); } }
/* Divider label */
.payment-option-modal .manual-divider { letter-spacing:.5px; color:#3a3f42; }
[data-theme='dark'] .payment-option-modal .manual-divider { color:#c9ced1; }

/* Payment Option buttons on Checkout */
button.btn.btn-light.border.position-relative { transition: border-color .2s, box-shadow .2s; }
button.btn.btn-light.border.position-relative:hover { border-color: #999; box-shadow: 0 2px 6px rgba(0,0,0,0.08); }
button.btn.btn-light.border.position-relative:focus-visible { outline: 2px solid #198754; outline-offset:2px; }

@media (max-width:600px) {
  .payment-option-modal { max-width: 94vw; }
}

/* Toast container */
.toast-region { position:fixed; top:1rem; right:1rem; display:grid; gap:.5rem; z-index:1000; max-width:260px; }
.toast { padding:.6rem .8rem; border-radius:6px; box-shadow:0 2px 6px rgba(0,0,0,.15); font-size:.85rem; }
/* Ensure readable body text in light theme */
.toast .toast-body { color:#212529; }
[data-theme='dark'] .toast .toast-body { color:#f8f9fa; }
.toast.info { background:#0a5c2b; }
.toast.error { background:#b02b2b; }

/* Store theme tokens */
:root {
  --store-accent:#0f6c3f;
  --store-accent-alt:#0c5a34;
  --store-accent-contrast:#ffffff;
  --store-accent-soft:#e6f6ee;
  --store-accent-muted:#3e6c55;
  --store-surface:#ffffff;
  --store-surface-elevated:#f0f6f1;
  --store-surface-page:#f6faf7;
  --store-border:rgba(15,108,63,0.12);
  --product-card-bg:linear-gradient(145deg, #f9fef9 0%, #eef8f1 100%);
  --product-card-border:1px solid rgba(15,108,63,0.08);
  --product-card-shadow:0 24px 48px -30px rgba(15,108,63,0.25);
  --product-card-shadow-hover:0 28px 54px -30px rgba(12,90,54,0.28);
}

[data-store-theme='fresh-emerald'] {
  --store-accent:#0f6c3f;
  --store-accent-alt:#0c5a34;
  --store-accent-contrast:#ffffff;
  --store-accent-soft:#e6f6ee;
  --store-accent-muted:#3e6c55;
  --store-surface:#ffffff;
  --store-surface-elevated:#f0f6f1;
  --store-surface-page:#f6faf7;
  --store-border:rgba(15,108,63,0.12);
  --product-card-bg:linear-gradient(145deg, #f9fef9 0%, #eef8f1 100%);
  --product-card-border:1px solid rgba(15,108,63,0.08);
  --product-card-shadow:0 24px 48px -30px rgba(15,108,63,0.25);
  --product-card-shadow-hover:0 28px 54px -30px rgba(12,90,54,0.28);
}

[data-store-theme='sunset-harvest'] {
  --store-accent:#c2551d;
  --store-accent-alt:#a94516;
  --store-accent-contrast:#fff6f2;
  --store-accent-soft:#fff1e7;
  --store-accent-muted:#8c4c33;
  --store-surface:#ffffff;
  --store-surface-elevated:#ffeede;
  --store-surface-page:#fff8f1;
  --store-border:rgba(194,85,29,0.18);
  --product-card-bg:linear-gradient(145deg, #fff6ef 0%, #ffe6d6 100%);
  --product-card-border:1px solid rgba(194,85,29,0.12);
  --product-card-shadow:0 24px 48px -30px rgba(194,85,29,0.28);
  --product-card-shadow-hover:0 28px 56px -32px rgba(161,62,21,0.32);
}

[data-store-theme='midnight-indigo'] {
  --store-accent:#4f72ff;
  --store-accent-alt:#6d87ff;
  --store-accent-contrast:#f3f5ff;
  --store-accent-soft:#1c243f;
  --store-accent-muted:#a5b5ff;
  --store-surface:#141b2b;
  --store-surface-elevated:#1b2437;
  --store-surface-page:#0f131f;
  --store-border:rgba(119,146,255,0.18);
  --product-card-bg:linear-gradient(145deg, rgba(24, 29, 48, 0.92) 0%, rgba(32, 38, 62, 0.94) 100%);
  --product-card-border:1px solid rgba(119,146,255,0.16);
  --product-card-shadow:0 26px 60px -34px rgba(2, 7, 22, 0.75);
  --product-card-shadow-hover:0 32px 68px -34px rgba(4, 12, 34, 0.78);
}

/* Progress steps */
.steps { list-style:none; padding:0; margin:0 0 1rem; display:flex; gap:1rem; flex-wrap:wrap; }
.steps li { display:flex; align-items:center; gap:.4rem; font-size:.8rem; text-transform:uppercase; letter-spacing:.5px; }
.steps .circle { width:24px; height:24px; border-radius:50%; display:inline-flex; align-items:center; justify-content:center; font-weight:600; }
.steps .done .circle { background:#0a5c2b; color:#fff; }
.steps .current .circle { background:#137d3b; color:#fff; box-shadow:0 0 0 3px rgba(19,125,59,.25); }
.steps .upcoming .circle { background:#d9e3dd; color:#333; }

/* Checkout layout */
.checkout-grid { display:grid; gap:1.5rem; align-items:start; }
.checkout-form { display:grid; gap:.8rem; max-width:420px; }
.field-error { color:#b02b2b; font-size:.75rem; }
.summary-list { list-style:none; padding:0; margin:0; }
.summary-item { display:flex; justify-content:space-between; font-size:.9rem; padding:.25rem 0; }
.summary-total { font-weight:600; border-top:1px solid #e3e3e3; margin-top:.5rem; padding-top:.5rem; }
.btn-row { display:flex; gap:.5rem; flex-wrap:wrap; }

/* Base surface variables derived from store theme */
:root {
  --bg:var(--store-surface-page, #f7f9f8);
  --text:#1f2a24;
  --surface:var(--store-surface, #ffffff);
  --surface-elevated:var(--store-surface-elevated, #f3f6f4);
  --border:var(--store-border, #dde4df);
  --accent:var(--store-accent, #0a5c2b);
  --accent-alt:var(--store-accent-alt, #137d3b);
  --accent-contrast:var(--store-accent-contrast, #ffffff);
  --accent-soft:var(--store-accent-soft, #e6f6ee);
  --muted:var(--store-accent-muted, #5c6d62);
}
/* Dark theme adjusted to neutral charcoal palette */
[data-theme='dark'] {
  --bg:var(--store-surface-page, #131819);
  --text:#e7ece9;
  --surface:var(--store-surface, #1c2123);
  --surface-elevated:var(--store-surface-elevated, #22282b);
  --border:var(--store-border, #30383b);
  --accent:var(--store-accent, #1b8b48);
  --accent-alt:var(--store-accent-alt, #24a258);
  --accent-contrast:var(--store-accent-contrast, #f8f9fa);
  --accent-soft:var(--store-accent-soft, rgba(36,162,88,0.18));
  --muted:var(--store-accent-muted, #9fa8a2);
}
body, #root, .layout { background:var(--bg); color:var(--text); }
.nav { background:var(--surface); border-bottom:1px solid var(--border); }
footer.footer { background:var(--surface); border-top:1px solid var(--border); }
.product-card { background:var(--product-card-bg, var(--surface)); border:none; box-shadow:var(--product-card-shadow, 0 16px 38px -30px rgba(9,27,18,0.45)); position:relative; overflow:hidden; }
.product-card.card { border:var(--product-card-border, none) !important; }
table.cart-table { background:var(--surface); border:1px solid var(--border); }
.product-card button, button { background:var(--accent); }
button:hover { background:var(--accent-alt); }
.product-card .price { color:var(--text); }
#root { width:100%; margin:0; padding:0; text-align:initial; }

.card,
.card-header,
.card-body,
.list-group-item,
.dropdown-menu,
.modal-content,
.dropdown-item,
.table,
.offcanvas,
.bg-body,
.bg-body-tertiary,
.bg-white {
  background-color: var(--surface) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}

[data-theme='dark'] .card,
[data-theme='dark'] .card-header,
[data-theme='dark'] .card-body,
[data-theme='dark'] .list-group-item,
[data-theme='dark'] .dropdown-menu,
[data-theme='dark'] .modal-content,
[data-theme='dark'] .dropdown-item,
[data-theme='dark'] .table,
[data-theme='dark'] .offcanvas,
[data-theme='dark'] .bg-body,
[data-theme='dark'] .bg-body-tertiary,
[data-theme='dark'] .bg-white {
  background-color: var(--surface) !important;
  color: var(--text) !important;
  border-color: var(--border) !important;
}

[data-theme='dark'] .card,
[data-theme='dark'] .list-group-item,
[data-theme='dark'] .dropdown-menu,
[data-theme='dark'] .modal-content {
  box-shadow: 0 12px 32px -18px rgba(0,0,0,0.7);
}

[data-theme='dark'] .table thead th {
  background-color: var(--surface-elevated) !important;
  color: var(--text) !important;
}

[data-theme='dark'] .text-muted {
  color: var(--muted) !important;
}

[data-theme='dark'] .breadcrumb-item + .breadcrumb-item::before {
  color: var(--muted);
}

[data-theme='dark'] .form-control,
[data-theme='dark'] .form-select,
[data-theme='dark'] .form-control:focus,
[data-theme='dark'] .form-select:focus {
  background-color: var(--surface-elevated);
  color: var(--text);
  border-color: var(--border);
  box-shadow: none;
}

[data-theme='dark'] .form-control:focus,
[data-theme='dark'] .form-select:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 2px rgba(36,162,88,0.25);
}

[data-theme='dark'] .btn-outline-secondary,
[data-theme='dark'] .btn-outline-primary {
  color: var(--text);
  border-color: var(--border);
}

[data-theme='dark'] .btn-outline-secondary:hover {
  background-color: var(--surface-elevated);
  color: var(--text);
}

[data-theme='dark'] .btn-outline-primary {
  border-color: var(--accent);
  color: var(--accent-alt);
}

[data-theme='dark'] .btn-outline-primary:hover {
  background-color: var(--accent);
  color: #fff;
}

* { box-sizing: border-box; }
body, #root, .layout { min-height: 100vh; margin: 0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif; background:var(--bg); color:var(--text); }
a { color:#0565c9; text-decoration:none; }
a:hover { text-decoration:underline; }

.navbar a,
.navbar a:hover,
.navbar a:focus,
.navbar a:active,
.navbar-brand,
.navbar-brand:hover,
.navbar-brand:focus,
.navbar-brand:active {
  text-decoration: none;
}
.layout { display:flex; flex-direction:column; }
main { flex:1; width:100%; padding:1.5rem clamp(.75rem, 3vw, 1.5rem); }

.nav { display:flex; gap:2rem; align-items:center; padding:.75rem 1rem; background:var(--surface); border-bottom:1px solid var(--border); position:sticky; top:0; z-index:10; }
.nav .brand { font-weight:700; font-size:1.15rem; color:var(--accent); }
.nav ul { list-style:none; display:flex; gap:1rem; padding:0; margin:0; }
.nav a { padding:.35rem .6rem; border-radius:6px; }
.nav a:hover { background:var(--accent-soft); }

footer.footer { padding:1rem; text-align:center; font-size:.85rem; background:var(--surface); border-top:1px solid var(--border); }

h1 { margin-top:0; font-size:clamp(1.8rem, 4vw, 2.3rem); }
p.muted { color:#555; font-size:.85rem; }

.grid { display:grid; gap:1rem; grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); }

button { background:var(--accent); color:var(--accent-contrast); padding:.55rem .9rem; border:none; border-radius:6px; cursor:pointer; font-weight:500; }
button.secondary { background:#b02b2b; }
button:hover { background:var(--accent-alt); }
button.secondary:hover { background:#c23c3c; }
button:active { scale:.98; }

.btn-primary,
.btn-success,
.btn-store-accent {
  --bs-btn-color: var(--accent-contrast);
  --bs-btn-bg: var(--accent);
  --bs-btn-border-color: var(--accent);
  --bs-btn-hover-bg: var(--accent-alt);
  --bs-btn-hover-border-color: var(--accent-alt);
  --bs-btn-hover-color: var(--accent-contrast);
  --bs-btn-active-bg: var(--accent-alt);
  --bs-btn-active-border-color: var(--accent-alt);
  --bs-btn-active-color: var(--accent-contrast);
  --bs-btn-disabled-bg: var(--accent);
  --bs-btn-disabled-border-color: var(--accent);
  --bs-btn-disabled-color: color-mix(in srgb, var(--accent-contrast) 70%, transparent);
  color: var(--accent-contrast);
}

.btn-outline-success,
.btn-outline-primary {
  --bs-btn-color: var(--accent);
  --bs-btn-border-color: var(--accent);
  --bs-btn-hover-bg: var(--accent-soft);
  --bs-btn-hover-border-color: var(--accent);
  --bs-btn-hover-color: var(--accent);
}

.btn-outline-success:focus-visible,
.btn-outline-primary:focus-visible,
.btn-primary:focus-visible,
.btn-success:focus-visible {
  box-shadow: 0 0 0 0.2rem color-mix(in srgb, var(--accent) 30%, transparent);
}

.rating-stars__star {
  color: #f7ad1a !important;
  text-decoration: none !important;
}
.rating-stars__star--interactive {
  background: transparent !important;
}
.rating-stars__star--interactive:hover,
.rating-stars__star--interactive:focus-visible {
  color: #e69500 !important;
  outline: none;
}
.rating-stars__star[disabled] {
  pointer-events: none;
}
.rating-stars--interactive .rating-stars__star {
  cursor: pointer;
}
[data-theme='dark'] .rating-stars__star {
  color: #ffc861 !important;
}

.product-card { transition:transform .2s ease, box-shadow .2s ease; display:flex; flex-direction:column; border-radius:14px; box-shadow:var(--product-card-shadow, 0 16px 38px -30px rgba(9,27,18,0.45)); }
.product-card:hover { transform:translateY(-4px); box-shadow:var(--product-card-shadow-hover, 0 24px 48px -26px rgba(14,48,30,.45)); }
.product-card .card-body { display:flex; flex-direction:column; flex:1 1 auto; }
.product-card .card-body .text-center { display:flex; align-items:center; justify-content:center; min-height:120px; }
.product-card__title { display:-webkit-box; -webkit-line-clamp:2; line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
.product-card__description { display:-webkit-box; -webkit-line-clamp:2; line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; min-height:2.6rem; }
.product-card__title--compact { white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.product-card--compact .card-body { padding:.75rem .75rem .4rem; }
.product-card--compact .card-body .text-center { min-height:80px; }
.product-card--compact .product-card__description { display:none; }
.product-card--compact .btn { padding:.5rem; font-size:.75rem; border-radius:999px; }
.product-card--compact .fw-semibold { font-size:.95rem; }

.product-card-skeleton { border-radius:14px; overflow:hidden; }

.product-carousel-track { display:flex; gap:1rem; overflow-x:auto; padding-bottom:.75rem; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch; }
.product-carousel-track::-webkit-scrollbar { height:6px; }
.product-carousel-track::-webkit-scrollbar-thumb { background:rgba(0,0,0,.18); border-radius:999px; }
.product-carousel-card { flex:0 0 clamp(210px, 22vw + 110px, 280px); scroll-snap-align:start; }
.product-carousel-card .product-card, .product-card-skeleton { border-radius:16px; }
.product-card-skeleton { background:linear-gradient(135deg, rgba(255,255,255,.9), rgba(244,248,246,.95)); box-shadow:0 12px 32px -28px rgba(17,31,21,.35); }
[data-theme='dark'] .product-card-skeleton { background:linear-gradient(135deg, rgba(32,36,34,.9), rgba(21,24,22,.95)); box-shadow:0 14px 40px -32px rgba(0,0,0,.7); }

.image-banner-surface { position:relative; overflow:hidden; }
.image-banner-surface::after { content:""; position:absolute; inset:18% 8% auto auto; width:180px; height:180px; border-radius:999px; opacity:.45; background:radial-gradient(circle at center, rgba(255,255,255,.3), transparent 60%); pointer-events:none; filter:blur(0); }
.image-banner-copy { position:relative; z-index:2; display:flex; flex-direction:column; gap:1rem; }
.image-banner__eyebrow { letter-spacing:.28em; opacity:.85; }
.image-banner__headline { font-size:clamp(2rem, 2.4vw + 1.1rem, 3rem); line-height:1.05; }
.image-banner__body { font-size:clamp(1rem, .5vw + 1rem, 1.25rem); max-width:38ch; }

.image-banner-carousel { position:relative; z-index:1; }
.image-banner-carousel__frame { position:relative; overflow:hidden; border-radius:28px; background:rgba(255,255,255,.08); box-shadow:0 24px 60px -40px rgba(10, 25, 24, .45); }
.image-banner-carousel__track { display:flex; transition:transform .6s ease; height:100%; }
.image-banner-carousel__slide { flex:0 0 auto; position:relative; overflow:hidden; }
.image-banner-carousel__slide img { width:100%; height:100%; object-fit:cover; display:block; }
.image-banner-carousel__controls { position:absolute; inset:auto 1rem 1rem 1rem; display:flex; justify-content:space-between; pointer-events:none; }
.image-banner-carousel__controls .btn { pointer-events:auto; border-radius:999px; backdrop-filter:blur(6px); }
.image-banner-carousel__dots { position:absolute; inset:auto 50% .85rem 50%; display:flex; gap:.45rem; justify-content:center; transform:translateX(-50%); }
.image-banner-carousel__dot { width:.65rem; height:.65rem; border-radius:999px; border:none; background:rgba(255,255,255,.35); padding:0; cursor:pointer; transition:transform .2s ease, background .2s ease, opacity .2s ease; }
.image-banner-carousel__dot.is-active { background:rgba(255,255,255,.85); transform:scale(1.2); }

.image-banner-placeholder { min-height:280px; display:flex; align-items:center; justify-content:center; border:dashed 1.5px rgba(255,255,255,.35); }

@media (max-width: 991.98px) {
  .image-banner-surface { padding:2rem 1.5rem !important; border-radius:24px !important; }
  .image-banner__headline { font-size:clamp(1.8rem, 2.6vw + 1rem, 2.4rem); }
  .image-banner-carousel__frame { border-radius:22px; margin-top:1.25rem; }
  .image-banner-carousel__controls { inset:auto .75rem .75rem .75rem; }
}

@media (max-width: 575.98px) {
  .image-banner-surface::after { display:none; }
  .image-banner-carousel__dots { bottom:.6rem; }
  .image-banner-carousel__controls .btn { padding:.35rem .55rem; }
}

@media (max-width: 575.98px) {
  .product-carousel-track {
    display:grid;
    grid-template-columns:repeat(2,minmax(0,1fr));
    gap:.75rem;
    overflow:visible;
    padding-bottom:0;
  }
  .product-carousel-card {
    flex:none;
    width:100%;
  }
  .product-carousel-card .product-card { min-width:0; }
  .product-carousel-card .product-card .card-body { padding:.7rem .45rem .4rem; }
  .product-carousel-card .product-card .card-body .text-center { min-height:72px; }
  .product-carousel-card .product-card h3 { font-size:.85rem; }
  .product-carousel-card .product-card .product-card__description { display:none; }
  .product-carousel-card .product-card .btn { padding:.45rem .5rem; font-size:.72rem; border-radius:999px; }
}

.promo-strip { position:relative; overflow:hidden; display:flex; align-items:center; gap:1.25rem; padding:.85rem 1.75rem; border-radius:999px; background:var(--promo-strip-gradient); color:var(--promo-strip-text); box-shadow:0 28px 70px -36px rgba(15,35,28,.55); }
.promo-strip__shimmer { position:absolute; inset:-60% -70%; background:radial-gradient(circle at 20% 20%, var(--promo-strip-sheen), transparent 55%); opacity:.5; animation:promoStripShine 9s linear infinite; mix-blend-mode:screen; pointer-events:none; }
.promo-strip__content { position:relative; display:flex; align-items:center; justify-content:space-between; gap:1.5rem; width:100%; flex-wrap:wrap; }
.promo-strip__copy { display:flex; flex-direction:column; gap:.2rem; min-width:0; }
.promo-strip__eyebrow { font-size:.7rem; text-transform:uppercase; letter-spacing:.22em; font-weight:600; opacity:.9; }
.promo-strip__headline { font-size:clamp(1rem, 1.4vw + .8rem, 1.3rem); font-weight:700; letter-spacing:.01em; }
.promo-strip__subtext { font-size:.8rem; opacity:.92; max-width:48ch; }
.promo-strip__cta { display:inline-flex; align-items:center; gap:.35rem; padding:.55rem 1rem; border-radius:999px; background:rgba(255,255,255,.16); color:var(--promo-strip-text); text-decoration:none; font-weight:600; transition:transform .2s ease, background .2s ease; backdrop-filter:blur(2px); box-shadow:0 12px 30px -20px rgba(0,0,0,.45); }
.promo-strip__cta:hover { transform:translateY(-1px); background:rgba(255,255,255,.26); text-decoration:none; }
.promo-strip__cta i { font-size:1.2rem; }

@keyframes promoStripShine {
  0% { transform:translate3d(-20%, -10%, 0) rotate(12deg); opacity:.55; }
  50% { transform:translate3d(40%, 10%, 0) rotate(12deg); opacity:.75; }
  100% { transform:translate3d(120%, -15%, 0) rotate(12deg); opacity:.45; }
}

@media (max-width: 767.98px) {
  .promo-strip { border-radius:24px; padding:1rem 1.25rem; }
  .promo-strip__content { flex-direction:column; align-items:flex-start; gap:.75rem; }
  .promo-strip__headline { font-size:1.05rem; }
  .promo-strip__cta { align-self:stretch; justify-content:center; }
}

@media (prefers-reduced-motion: reduce) {
  .promo-strip__shimmer { animation:none; opacity:.35; }
  .promo-strip__cta { transition:none; }
}

.tag-select__control { border-radius:10px; border-color:var(--border); min-height:44px; box-shadow:none; background:var(--surface); }
.tag-select__control:hover { border-color:var(--accent); }
.tag-select__control--is-focused { border-color:var(--accent); box-shadow:0 0 0 2px rgba(19,125,59,.18); }
.tag-select__value-container { gap:.35rem; padding:.25rem .6rem; }
.tag-select__multi-value { background:rgba(10,92,43,.12); border-radius:999px; }
.tag-select__multi-value__label { color:var(--accent); font-weight:600; font-size:.8rem; padding:.25rem .35rem .25rem .55rem; }
.tag-select__multi-value__remove { color:var(--accent); padding-right:.45rem; }
.tag-select__indicator-separator { display:none; }
.tag-select__menu { z-index:1056; border-radius:12px; overflow:hidden; box-shadow:0 16px 38px -24px rgba(0,0,0,.16); }
.tag-select__option--is-focused { background:rgba(19,125,59,.08); color:var(--accent); }
.tag-select__option--is-selected { background:rgba(19,125,59,.16); color:var(--accent); }
.tag-select__placeholder { color:var(--muted); font-size:.85rem; }
[data-theme='dark'] .tag-select__control { background:var(--surface-elevated); border-color:var(--border); }
[data-theme='dark'] .tag-select__control--is-focused { box-shadow:0 0 0 2px rgba(36,162,88,.28); }
[data-theme='dark'] .tag-select__multi-value { background:rgba(36,162,88,.18); }
[data-theme='dark'] .tag-select__multi-value__label { color:#7fffc1; }
[data-theme='dark'] .tag-select__menu { background:var(--surface-elevated); }
[data-theme='dark'] .tag-select__option--is-focused { background:rgba(36,162,88,.22); color:#7fffc1; }
[data-theme='dark'] .tag-select__option--is-selected { background:rgba(36,162,88,.32); color:#7fffc1; }

table.cart-table { width:100%; border-collapse:collapse; background:var(--surface); border:1px solid var(--border); }
table.cart-table th, table.cart-table td { padding:.5rem .6rem; text-align:left; border-bottom:1px solid #ececec; font-size:.9rem; }
table.cart-table input { width:60px; }
.total { font-size:1.1rem; font-weight:600; }

.cart-item-card { border:1px solid var(--border); border-radius:12px; padding:1rem; background:var(--surface); }
.cart-item-card__header { display:flex; justify-content:space-between; gap:.75rem; align-items:flex-start; margin-bottom:.5rem; }
.cart-item-card__name { font-weight:600; font-size:1rem; }
.cart-item-card__meta { display:flex; flex-wrap:wrap; gap:.5rem; font-size:.85rem; color:var(--muted); }
.cart-item-card__footer { display:flex; flex-direction:column; gap:.65rem; margin-top:.75rem; }
.cart-item-card__actions { display:flex; flex-wrap:wrap; gap:.5rem; }
.cart-item-card__price { font-weight:600; }

@media (max-width: 575.98px) {
  .product-card .card-body .text-center { min-height:96px; }
  .product-card__description { min-height:auto; }
  .product-card { width:100%; }
}

@media (max-width:600px) {
  .nav ul { gap:.4rem; }
  main { padding:1.1rem .75rem; }
}

/* Mobile toast centering */
@media (max-width: 575.98px) {
  .toast-container-responsive { left:50%; right:auto !important; transform:translateX(-50%); width: min(92vw, 380px); }
  .toast-container-responsive .toast { width:100%; }
}

/* Full-width action buttons helper (already applied via flex-grow classes, safety fallback) */
@media (max-width: 575.98px) {
  .btn { min-height:44px; }
}

/* Mobile cart bar */
.mobile-cart-bar { backdrop-filter: blur(6px); }
[data-theme='dark'] .mobile-cart-bar { background:rgba(30,33,30,0.92)!important; }

/* Print styles: focus on receipt card */
@media print {
  body * { visibility:hidden; }
  .card, .card * { visibility:visible; }
  .card { position:absolute; left:0; top:0; width:280px; box-shadow:none !important; border:0 !important; }
  nav, footer, .navbar, .mobile-cart-bar { display:none !important; }
}

/* Payment Option Modal Enhancements */
.payment-option-modal::backdrop { background: rgba(0,0,0,0.45); backdrop-filter: blur(2px); }
.payment-option-modal { border: none; padding: 0; border-radius: 16px; box-shadow: 0 8px 32px -4px rgba(0,0,0,0.35); max-width: 520px; width: 100%; }
.payment-option-modal .pom-header h2 { font-weight: 600; letter-spacing: .3px; }
.payment-option-modal .pom-logo-wrapper { flex-shrink:0; }
.payment-option-modal .pom-logo-wrapper .pom-logo { display:block; }
.payment-option-modal form input.form-control { font-size: .9rem; }
.payment-option-modal .form-text { font-size: .65rem; }

/* Silver themed surface for payment modal */
.payment-option-modal .pom-surface { background: linear-gradient(135deg,#f0f1f3,#e2e4e7 55%,#d7dadd); border-radius:16px; overflow:hidden; }
/* Also apply silver theme for admin payment option config dialog */
.payment-option-modal.admin-config .pom-surface { background: linear-gradient(135deg,#f0f1f3,#e2e4e7 55%,#d7dadd); }
.payment-option-modal .pom-header { background: rgba(255,255,255,0.6); backdrop-filter: blur(4px); }
.payment-option-modal .pom-body { background: linear-gradient(180deg,rgba(255,255,255,0.55),rgba(255,255,255,0.35)); }
.payment-option-modal .reconcile-block { background: rgba(255,255,255,0.75)!important; }
[data-theme='dark'] .payment-option-modal .pom-surface { background: linear-gradient(135deg,#2b2e30,#26292b 60%,#212426); }
[data-theme='dark'] .payment-option-modal.admin-config .pom-surface { background: linear-gradient(135deg,#2b2e30,#26292b 60%,#212426); }
[data-theme='dark'] .payment-option-modal .pom-header { background: rgba(40,43,45,0.75); }
[data-theme='dark'] .payment-option-modal .pom-body { background: linear-gradient(180deg,rgba(50,53,55,0.55),rgba(45,48,50,0.35)); }
[data-theme='dark'] .payment-option-modal .reconcile-block { background: rgba(70,74,78,0.75)!important; }
/* Improve modal instructions heading contrast */
.payment-option-modal .instructions-heading { color:#2d3235; background:linear-gradient(90deg,rgba(255,255,255,0.9),rgba(255,255,255,0)); padding:.25rem .5rem; border-left:4px solid #137d3b; border-radius:4px; }
[data-theme='dark'] .payment-option-modal .instructions-heading { color:#eef1f2; background:linear-gradient(90deg,rgba(60,63,66,0.85),rgba(60,63,66,0)); border-left-color:#24a258; }
/* Force higher contrast for small text in modal */
.payment-option-modal .small, .payment-option-modal small { color:#2f3437; }
[data-theme='dark'] .payment-option-modal .small, [data-theme='dark'] .payment-option-modal small { color:#d8dcdf; }
/* Inputs contrast adjustments */
[data-theme='dark'] .payment-option-modal input.form-control, [data-theme='dark'] .payment-option-modal input.form-control-sm { background:#383c3f; color:#f2f4f5; border-color:#4a5053; }
[data-theme='dark'] .payment-option-modal input.form-control:focus { border-color:#24a258; box-shadow:0 0 0 2px rgba(36,162,88,.3); }
/* Buttons outline variant visibility */
[data-theme='dark'] .payment-option-modal .btn.btn-outline-secondary { color:#e3e6e8; border-color:#5a6063; }
[data-theme='dark'] .payment-option-modal .btn.btn-outline-secondary:hover { background:#44484b; }
[data-theme='dark'] .payment-option-modal .btn.btn-outline-primary { color:#e6f8ed; border-color:#24a258; }
[data-theme='dark'] .payment-option-modal .btn.btn-outline-primary:hover { background:#24a258; color:#fff; }
/* Animations for fallback sections */
.payment-option-modal .fade-in { animation: fadeIn .4s ease both; }
.payment-option-modal .slide-up { animation: slideUp .45s ease both; }
@keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
@keyframes slideUp { from { opacity:0; transform: translateY(8px); } to { opacity:1; transform: translateY(0); } }
/* Divider label */
.payment-option-modal .manual-divider { letter-spacing:.5px; color:#3a3f42; }
[data-theme='dark'] .payment-option-modal .manual-divider { color:#c9ced1; }

/* Payment Option buttons on Checkout */
button.btn.btn-light.border.position-relative { transition: border-color .2s, box-shadow .2s; }
button.btn.btn-light.border.position-relative:hover { border-color: #999; box-shadow: 0 2px 6px rgba(0,0,0,0.08); }
button.btn.btn-light.border.position-relative:focus-visible { outline: 2px solid #198754; outline-offset:2px; }

@media (max-width:600px) {
  .payment-option-modal { max-width: 94vw; }
}

.brand-preview { transition: box-shadow .2s ease; }
.brand-preview:hover { box-shadow: 0 12px 36px -20px rgba(0,0,0,0.35); }

.brand-style-option { border-radius: 14px; padding: .75rem .85rem; background: rgba(255,255,255,0.75); transition: border-color .2s ease, box-shadow .2s ease, background .2s ease; min-height: 148px; }
.brand-style-option.active { border-color: #137d3b; box-shadow: 0 12px 28px -22px rgba(19,125,59,0.55); background: rgba(227, 246, 235, 0.8); }
.brand-style-option .brand-style-swatch { height: 92px; display:flex; align-items:center; justify-content:center; border-radius: 12px; color: inherit; background-size: cover; background-position: center; transition: transform .2s ease; position: relative; overflow:hidden; }
.brand-style-option:hover .brand-style-swatch { transform: translateY(-2px) scale(1.01); }
.brand-style-option .brand-style-text { font-size: 1.05rem; text-transform: none; color: inherit; text-shadow: 0 2px 8px rgba(0,0,0,0.18); }

[data-theme='dark'] .brand-style-option { background: rgba(33, 36, 33, 0.85); border-color: rgba(72, 88, 82, 0.6); }
[data-theme='dark'] .brand-style-option.active { border-color: #24a258; background: rgba(36, 162, 88, 0.22); box-shadow: 0 18px 38px -24px rgba(26, 180, 96, 0.45); }
[data-theme='dark'] .brand-preview { background: rgba(28, 31, 28, 0.9) !important; }
[data-theme='dark'] .brand-style-option .brand-style-text { text-shadow: 0 2px 8px rgba(0,0,0,0.4); }

.brand-badge-option { border-radius: 16px; padding: .65rem .75rem; background: rgba(255,255,255,0.78); display:flex; flex-direction:column; align-items:flex-start; gap:.35rem; min-height: 168px; transition: border-color .2s ease, box-shadow .2s ease, background .2s ease, transform .2s ease; }
.brand-badge-option .brand-badge-thumb { width:100%; aspect-ratio: 1 / 1; background: rgba(233, 245, 238, 0.75); display:flex; align-items:center; justify-content:center; overflow:hidden; transition: transform .2s ease; }
.brand-badge-option .brand-badge-thumb img { width:100%; height:100%; object-fit:contain; display:block; pointer-events:none; }
.brand-badge-option:hover .brand-badge-thumb { transform: translateY(-2px); }
.brand-badge-option.active { border-color: #137d3b; box-shadow: 0 14px 32px -24px rgba(19,125,59,0.55); background: rgba(227, 246, 235, 0.85); }

[data-theme='dark'] .brand-badge-option { background: rgba(28, 32, 30, 0.88); border-color: rgba(72, 88, 82, 0.55); }
[data-theme='dark'] .brand-badge-option .brand-badge-thumb { background: rgba(36, 162, 88, 0.22); }
[data-theme='dark'] .brand-badge-option.active { border-color: #24a258; background: rgba(36, 162, 88, 0.22); box-shadow: 0 18px 38px -24px rgba(36, 162, 88, 0.45); }

.brand-shape-option { border-radius: 16px; padding: .65rem .75rem; background: rgba(255,255,255,0.8); display:flex; flex-direction:column; align-items:flex-start; gap:.35rem; min-height: 150px; transition: border-color .2s ease, box-shadow .2s ease, background .2s ease, transform .2s ease; }
.brand-shape-option:hover { transform: translateY(-1px); }
.brand-shape-option.active { border-color: #137d3b; background: rgba(227, 246, 235, 0.85); box-shadow: 0 12px 30px -22px rgba(19,125,59,0.45); }
.brand-shape-swatch { width: 100%; aspect-ratio: 3 / 2; display:flex; align-items:center; justify-content:center; background: rgba(233, 245, 238, 0.65); border-radius: 20px; padding: .45rem; transition: transform .2s ease; overflow:hidden; }
.brand-shape-option:hover .brand-shape-swatch { transform: translateY(-2px); }
.brand-shape-swatch-inner { width: 72%; height: 72%; display:block; background: rgba(19,125,59,0.12); border: 2px dashed rgba(19,125,59,0.35); }

[data-theme='dark'] .brand-shape-option { background: rgba(33, 36, 33, 0.88); border-color: rgba(72, 88, 82, 0.55); }
[data-theme='dark'] .brand-shape-option.active { border-color: #24a258; background: rgba(36, 162, 88, 0.22); box-shadow: 0 16px 36px -24px rgba(36, 162, 88, 0.45); }
[data-theme='dark'] .brand-shape-swatch { background: rgba(36, 162, 88, 0.18); }

.navbar-nav .nav-link-pill { border-radius: 999px; color: var(--bs-body-color); background: transparent; border: 1px solid transparent; transition: all .2s ease; padding-top: .55rem; padding-bottom: .55rem; position: relative; text-align: center; }
.navbar-nav .nav-link-pill span { line-height: 1; }
.navbar-nav .nav-link-pill i { font-size: 1.05rem; }
.navbar-nav .nav-link-pill:hover,
.navbar-nav .nav-link-pill:focus-visible { background: rgba(34, 197, 94, 0.08); border-color: rgba(34,197,94,0.2); color: #137d3b; box-shadow: 0 6px 18px -14px rgba(19,125,59,0.55); }
.navbar-nav .nav-link-pill.active { background: #137d3b; color: #fff; border-color: #137d3b; box-shadow: 0 12px 28px -18px rgba(19,125,59,0.65); }
.navbar-nav .nav-link-pill.active i { color: inherit; }
.navbar-nav .nav-link-pill.active::after { content: ''; position: absolute; inset: -2px; border-radius: inherit; border: 1px solid rgba(255,255,255,0.35); pointer-events: none; opacity: .7; }
.navbar-nav .nav-link-pill--cart .badge { font-size: .65rem; font-weight: 600; }

[data-theme='dark'] .navbar-nav .nav-link-pill { color: rgba(255,255,255,0.82); }
[data-theme='dark'] .navbar-nav .nav-link-pill:hover,
[data-theme='dark'] .navbar-nav .nav-link-pill:focus-visible { background: rgba(36,162,88,0.25); border-color: rgba(36,162,88,0.35); color: #b9f5d1; box-shadow: 0 8px 22px -18px rgba(36,162,88,0.5); }
[data-theme='dark'] .navbar-nav .nav-link-pill.active { background: rgba(36,162,88,0.9); color: #041b10; border-color: rgba(36,162,88,0.9); box-shadow: 0 14px 30px -18px rgba(36,162,88,0.55); }

.brand-asset { background: rgba(255,255,255,0.78); border: 1px solid rgba(19,125,59,0.14); padding: .35rem .6rem; transition: box-shadow .2s ease, border-color .2s ease, background .2s ease; overflow: hidden; }
.brand-asset__image { display:block; width: 100%; height: 100%; object-fit: contain; }
.brand-asset--generated { box-shadow: 0 12px 28px -20px rgba(19,125,59,0.45); }

[data-theme='dark'] .brand-asset { background: rgba(33,36,34,0.85); border-color: rgba(58,82,70,0.5); }
[data-theme='dark'] .brand-asset--generated { box-shadow: 0 16px 34px -24px rgba(54,210,123,0.45); }

.brand-shape-surface[data-shape='square'] { border-radius: 6px; }
.brand-shape-surface[data-shape='rounded'] { border-radius: 18px; }
.brand-shape-surface[data-shape='circle'] { border-radius: 999px; }
.brand-shape-surface[data-shape='pill'] { border-radius: 999px; }
.brand-shape-surface[data-shape='squircle'] { border-radius: 32%; }

.navbar-brand-mark { min-width: 46px; min-height: 46px; max-height: 58px; width: auto; height: auto; gap: .25rem; }
.navbar-brand-logo { max-height: 48px; width: auto; object-fit: contain; display:block; }
.navbar-brand { --brand-text-scale: 1; }
.navbar-brand-text {
  line-height: 1;
  display: inline-flex;
  align-items: center;
  font-size: calc(clamp(1.35rem, 2vw + 1rem, 2.1rem) * var(--brand-text-scale, 1));
  letter-spacing: calc(0.02em * var(--brand-text-scale, 1));
  transition: font-size .2s ease, letter-spacing .2s ease;
}

.footer-brand-image { max-height: 66px; width: auto; object-fit: contain; box-shadow: 0 12px 26px -20px rgba(0,0,0,0.35); background: rgba(255,255,255,0.92); padding: .4rem .75rem; display:block; }

[data-theme='dark'] .footer-brand-image { background: rgba(36,38,36,0.92); box-shadow: 0 14px 30px -22px rgba(0,0,0,0.55); }

.navbar-brand-logo--generated { box-shadow: 0 10px 26px -18px rgba(19,125,59,0.6); }
[data-theme='dark'] .navbar-brand-logo--generated { box-shadow: 0 12px 30px -20px rgba(54,210,123,0.55); }
